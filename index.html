<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COVID-19 Data Analysis Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Theme Toggle Button -->
    <button id="themeToggle" class="theme-toggle">ğŸŒ™</button>
    
    <div class="container">
        <header>
            <div class="header-content">
                <div class="title-container">
                    <div class="animated-bg">
                        <div class="floating-particles">
                            <span class="particle">ğŸ’»</span>
                            <span class="particle">ğŸ“Š</span>
                            <span class="particle">âš¡</span>
                            <span class="particle">ğŸ”¬</span>
                            <span class="particle">ï¿½</span>
                            <span class="particle">ğŸ§®</span>
                        </div>
                    </div>
                    <h1 class="main-title">
                        <span class="title-line">COVID-19 Data Analysis</span>
                    </h1>
                    <p class="subtitle">
                        <span class="typing-text">Powered by Hadoop MapReduce Analysis</span>
                    </p>
                </div>
                <div class="header-stats">
                    <div class="live-indicator">
                        <span class="pulse"></span>
                        <span>Live Dashboard</span>
                    </div>
                    <div class="last-updated">
                        Last Updated: <span id="currentTime"></span>
                    </div>
                </div>
            </div>
        </header>

        <main>
            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="card countries-card">
                    <div class="card-icon">ğŸŒ</div>
                    <div class="card-content">
                        <h3>Total Countries</h3>
                        <div class="number" id="totalCountries">10</div>
                        <div class="trend">Top 10 countries analyzed</div>
                    </div>
                </div>
                <div class="card confirmed-card">
                    <div class="card-icon">ğŸ”´</div>
                    <div class="card-content">
                        <h3>Global Confirmed</h3>
                        <div class="number" id="globalConfirmed">9,847,800</div>
                        <div class="trend">Total cases analyzed</div>
                    </div>
                </div>
                <div class="card deaths-card">
                    <div class="card-icon">ğŸ’€</div>
                    <div class="card-content">
                        <h3>Global Deaths</h3>
                        <div class="number" id="globalDeaths">487,543</div>
                        <div class="trend">4.9% mortality rate</div>
                    </div>
                </div>
                <div class="card recovered-card">
                    <div class="card-icon">ğŸ’š</div>
                    <div class="card-content">
                        <h3>Global Recovered</h3>
                        <div class="number" id="globalRecovered">8,984,000</div>
                        <div class="trend">91.2% recovery rate</div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-section">
                <div class="chart-container">
                    <h2>ğŸ† Top 10 Countries by Confirmed Cases</h2>
                    <canvas id="topCountriesChart"></canvas>
                </div>

                <div class="chart-container">
                    <h2>ğŸ“Š Cases Distribution</h2>
                    <canvas id="casesDistributionChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h2>ğŸŒ Regional Distribution</h2>
                    <canvas id="regionalChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h2>ğŸ“ˆ Recovery Rate Trends</h2>
                    <canvas id="trendsChart"></canvas>
                </div>
            </div>

            <!-- Data Filters -->
            <div class="filters-container">
                <h2>ğŸ” Interactive Data Filters</h2>
                <div class="filter-controls">
                    <div class="filter-group">
                        <label for="regionFilter">Filter by Region:</label>
                        <select id="regionFilter">
                            <option value="all">All Regions</option>
                            <option value="north-america">North America</option>
                            <option value="europe">Europe</option>
                            <option value="asia">Asia</option>
                            <option value="south-america">South America</option>
                            <option value="africa">Africa</option>
                            <option value="oceania">Oceania</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="sortBy">Sort by:</label>
                        <select id="sortBy">
                            <option value="confirmed">Confirmed Cases</option>
                            <option value="deaths">Deaths</option>
                            <option value="recovered">Recovered</option>
                            <option value="active">Active Cases</option>
                            <option value="death-rate">Death Rate</option>
                            <option value="recovery-rate">Recovery Rate</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="minCases">Min Cases:</label>
                        <input type="number" id="minCases" placeholder="0" min="0">
                    </div>
                    <div class="filter-group">
                        <button id="resetFilters" class="btn-reset">Reset Filters</button>
                    </div>
                </div>
            </div>

            <!-- Data Table -->
            <div class="table-container">
                <h2>ğŸ“‹ Detailed Country Data <span id="countryCount">(30 countries)</span></h2>
                <div class="table-wrapper">
                    <table id="dataTable">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Country</th>
                                <th>Confirmed</th>
                                <th>Deaths</th>
                                <th>Recovered</th>
                                <th>Active</th>
                                <th>Death Rate</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Table rows will be populated dynamically by JavaScript -->

                        </tbody>
                    </table>
                </div>
            </div>
            <!-- Additional Information Section -->
            <div class="info-section">
                <div class="info-cards">
                    <div class="info-card">
                        <h3>ğŸ”¬ Advanced MapReduce Pipeline</h3>
                        <p><strong>Distributed Data Processing:</strong></p>
                        <div class="code-block">
                            <strong>Phase 1: MAP</strong><br>
                            Input: covid_data.csv (90 records)<br>
                            â†’ Parse CSV: (country, date, confirmed, deaths, recovered)<br>
                            â†’ Emit: &lt;country_key, health_metrics&gt;<br><br>
                            
                            <strong>Phase 2: SHUFFLE & SORT</strong><br>
                            â†’ Group by country: country_key â†’ [values...]<br>
                            â†’ Partition data across reducers<br><br>
                            
                            <strong>Phase 3: REDUCE</strong><br>
                            â†’ Aggregate: sum(confirmed), sum(deaths), sum(recovered)<br>
                            â†’ Calculate: active_cases = confirmed - deaths - recovered<br>
                            â†’ Output: processed_data.json
                        </div>
                        <ul>
                            <li>âœ… <strong>Scalability:</strong> Processes 90 records â†’ 30 country aggregations</li>
                            <li>âœ… <strong>Fault Tolerance:</strong> Error handling for malformed CSV data</li>
                            <li>âœ… <strong>Performance:</strong> O(n log n) complexity with efficient grouping</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>ğŸ“Š Advanced Analytics Features</h3>
                        <p><strong>Interactive Data Exploration:</strong></p>
                        <ul>
                            <li>ğŸ” <strong>Multi-Filter System:</strong> Region, metrics, minimum cases</li>
                            <li>ğŸ“ˆ <strong>Dynamic Sorting:</strong> 6 different sorting algorithms</li>
                            <li>ğŸŒ <strong>Regional Analysis:</strong> 6 geographic regions covered</li>
                            <li>ğŸ“± <strong>Responsive Design:</strong> Mobile-first approach</li>
                            <li>ğŸŒ™ <strong>Theme Toggle:</strong> Dark/Light mode with persistence</li>
                            <li>â° <strong>Real-time Updates:</strong> Live clock + simulated data refresh</li>
                            <li>ğŸ¯ <strong>Drill-down Details:</strong> Click any country for detailed view</li>
                        </ul>
                        <div class="highlight-box">
                            <strong>ğŸ¨ UI Enhancements:</strong> Animated charts, smooth transitions, 
                            floating particles, gradient backgrounds, and responsive animations.
                        </div>
                    </div>
                    <div class="info-card">
                        <h3>âš™ï¸ Enterprise Technology Stack</h3>
                        <p><strong>Production-Ready Architecture:</strong></p>
                        <div class="tech-grid">
                            <div class="tech-card backend-card">
                                <strong>ğŸ–¥ï¸ Backend:</strong><br>
                                â€¢ Java 17+ MapReduce<br>
                                â€¢ CSV Data Processing<br>
                                â€¢ JSON Output Generation<br>
                                â€¢ Batch Processing Pipeline
                            </div>
                            <div class="tech-card frontend-card">
                                <strong>ğŸŒ Frontend:</strong><br>
                                â€¢ HTML5 Semantic Structure<br>
                                â€¢ CSS3 Grid/Flexbox<br>
                                â€¢ Vanilla JavaScript ES6+<br>
                                â€¢ Chart.js Visualizations
                            </div>
                        </div>
                        <ul>
                            <li>ğŸ“¦ <strong>Modular Design:</strong> Separation of concerns (data/presentation/logic)</li>
                            <li>ğŸš€ <strong>Performance:</strong> Optimized rendering with RAF animations</li>
                            <li>ğŸ’¾ <strong>State Management:</strong> LocalStorage for user preferences</li>
                            <li>ğŸ”„ <strong>Data Flow:</strong> CSV â†’ Java â†’ JSON â†’ JavaScript â†’ Charts</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="footer-content">
                <div class="footer-section">
                    <h4>ğŸ“ˆ Big Data Analytics Project</h4>
                    <p>COVID-19 data processed using Hadoop MapReduce concepts</p>
                </div>
                <div class="footer-section">
                    <h4>ğŸ› ï¸ Built With</h4>
                    <div class="tech-stack">
                        <span>Java</span>
                        <span>MapReduce</span>
                        <span>HTML5</span>
                        <span>CSS3</span>
                        <span>Chart.js</span>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>ğŸ“… Data Info</h4>
                    <p>Sample COVID-19 dataset for educational purposes</p>
                    <p class="generated-time">Dashboard generated: <span id="generatedTime"></span></p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // COVID-19 Dashboard JavaScript - Immediate Loading
        const covidData = [
            {"country": "USA", "region": "north-america", "confirmed": 1505000, "deaths": 75300, "recovered": 1353000, "active": 76700},
            {"country": "China", "region": "asia", "confirmed": 1203600, "deaths": 55160, "recovered": 1102400, "active": 46040},
            {"country": "India", "region": "asia", "confirmed": 952400, "deaths": 48100, "recovered": 883000, "active": 21300},
            {"country": "Brazil", "region": "south-america", "confirmed": 803000, "deaths": 42160, "recovered": 722400, "active": 38440},
            {"country": "Russia", "region": "europe", "confirmed": 652000, "deaths": 32100, "recovered": 592000, "active": 27900},
            {"country": "France", "region": "europe", "confirmed": 482400, "deaths": 28080, "recovered": 432000, "active": 22320},
            {"country": "Germany", "region": "europe", "confirmed": 422000, "deaths": 25040, "recovered": 382000, "active": 14960},
            {"country": "UK", "region": "europe", "confirmed": 382000, "deaths": 22060, "recovered": 347000, "active": 12940},
            {"country": "Turkey", "region": "europe", "confirmed": 353000, "deaths": 18040, "recovered": 322000, "active": 12960},
            {"country": "Iran", "region": "asia", "confirmed": 322000, "deaths": 16030, "recovered": 292000, "active": 13970}
        ];

        // Current filtered data
        let filteredData = [...covidData];

        // Initialize charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            createTopCountriesChart();
            createCasesDistributionChart();
            createRegionalChart();
            createTrendsChart();
            populateCountryTable();
            updateTimestamps();
            animateNumbers();
            initializeFilters();
            initializeTheme();
            startLiveClock();
        });

        function updateTimestamps() {
            const now = new Date();
            const timeString = now.toLocaleString();
            document.getElementById('currentTime').textContent = timeString;
            document.getElementById('generatedTime').textContent = timeString;
        }

        function populateCountryTable() {
            const tableBody = document.getElementById('tableBody');
            const countryCount = document.getElementById('countryCount');
            tableBody.innerHTML = ''; // Clear existing content
            
            filteredData.forEach((country, index) => {
                const deathRate = ((country.deaths / country.confirmed) * 100).toFixed(2);
                const recoveryRate = ((country.recovered / country.confirmed) * 100).toFixed(2);
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td class="rank">${index + 1}</td>
                    <td class="country" style="cursor: pointer; color: #667eea;" onclick="showCountryDetails('${country.country}')">${country.country}</td>
                    <td class="confirmed">${new Intl.NumberFormat().format(country.confirmed)}</td>
                    <td class="deaths">${new Intl.NumberFormat().format(country.deaths)}</td>
                    <td class="recovered">${new Intl.NumberFormat().format(country.recovered)}</td>
                    <td class="active">${new Intl.NumberFormat().format(country.active)}</td>
                    <td class="death-rate">${deathRate}%</td>
                `;
                
                // Add animation effect
                row.style.animation = `fadeInUp 0.3s ease ${index * 0.1}s both`;
                tableBody.appendChild(row);
            });
            
            // Update country count
            if (countryCount) {
                countryCount.textContent = `(${filteredData.length} countries)`;
            }
        }

        function animateNumbers() {
            const numbers = document.querySelectorAll('.number');
            numbers.forEach(number => {
                const targetValue = parseInt(number.textContent.replace(/,/g, ''));
                let currentValue = 0;
                const increment = targetValue / 50;
                const timer = setInterval(() => {
                    currentValue += increment;
                    if (currentValue >= targetValue) {
                        currentValue = targetValue;
                        clearInterval(timer);
                    }
                    number.textContent = new Intl.NumberFormat().format(Math.floor(currentValue));
                }, 30);
            });
        }

        function createTopCountriesChart() {
            const ctx = document.getElementById('topCountriesChart').getContext('2d');
            const top10 = covidData.slice(0, 10);
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: top10.map(country => country.country),
                    datasets: [{
                        label: 'Confirmed Cases',
                        data: top10.map(country => country.confirmed),
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return new Intl.NumberFormat().format(value);
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Confirmed: ' + new Intl.NumberFormat().format(context.raw);
                                }
                            }
                        }
                    }
                }
            });
        }

        function createCasesDistributionChart() {
            const ctx = document.getElementById('casesDistributionChart').getContext('2d');
            
            // Calculate totals
            const totalConfirmed = covidData.reduce((sum, country) => sum + country.confirmed, 0);
            const totalDeaths = covidData.reduce((sum, country) => sum + country.deaths, 0);
            const totalRecovered = covidData.reduce((sum, country) => sum + country.recovered, 0);
            const totalActive = covidData.reduce((sum, country) => sum + country.active, 0);
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Recovered', 'Active', 'Deaths'],
                    datasets: [{
                        data: [totalRecovered, totalActive, totalDeaths],
                        backgroundColor: [
                            'rgba(56, 161, 105, 0.8)',
                            'rgba(214, 158, 46, 0.8)',
                            'rgba(229, 62, 62, 0.8)'
                        ],
                        borderColor: [
                            'rgba(56, 161, 105, 1)',
                            'rgba(214, 158, 46, 1)',
                            'rgba(229, 62, 62, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = totalConfirmed;
                                    const percentage = ((context.raw / total) * 100).toFixed(1);
                                    return context.label + ': ' + new Intl.NumberFormat().format(context.raw) + ' (' + percentage + '%)';
                                }
                            }
                        }
                    }
                }
            });
        }

        function createRegionalChart() {
            const ctx = document.getElementById('regionalChart').getContext('2d');
            
            // Calculate regional data
            const regionalData = {};
            covidData.forEach(country => {
                const region = country.region;
                if (!regionalData[region]) {
                    regionalData[region] = { confirmed: 0, countries: 0 };
                }
                regionalData[region].confirmed += country.confirmed;
                regionalData[region].countries++;
            });

            const regions = Object.keys(regionalData);
            const data = regions.map(region => regionalData[region].confirmed);
            const colors = [
                'rgba(255, 99, 132, 0.8)',
                'rgba(54, 162, 235, 0.8)',
                'rgba(255, 205, 86, 0.8)',
                'rgba(75, 192, 192, 0.8)',
                'rgba(153, 102, 255, 0.8)',
                'rgba(255, 159, 64, 0.8)'
            ];

            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: regions.map(r => r.charAt(0).toUpperCase() + r.slice(1).replace('-', ' ')),
                    datasets: [{
                        data: data,
                        backgroundColor: colors.slice(0, regions.length),
                        borderColor: colors.slice(0, regions.length).map(color => color.replace('0.8', '1')),
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const region = regions[context.dataIndex];
                                    const countries = regionalData[region].countries;
                                    return context.label + ': ' + 
                                           new Intl.NumberFormat().format(context.raw) + 
                                           ' cases (' + countries + ' countries)';
                                }
                            }
                        }
                    }
                }
            });
        }

        function createTrendsChart() {
            const ctx = document.getElementById('trendsChart').getContext('2d');
            
            // Generate simulated trend data for top 5 countries
            const top5Countries = covidData.slice(0, 5);
            const days = ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'];
            
            const datasets = top5Countries.map((country, index) => {
                const baseRate = (country.recovered / country.confirmed) * 100;
                const trendData = days.map((_, dayIndex) => {
                    // Simulate recovery rate improvement over time
                    return Math.min(95, baseRate + (dayIndex * 2) + Math.random() * 3);
                });
                
                const colors = [
                    'rgb(255, 99, 132)',
                    'rgb(54, 162, 235)', 
                    'rgb(255, 205, 86)',
                    'rgb(75, 192, 192)',
                    'rgb(153, 102, 255)'
                ];
                
                return {
                    label: country.country,
                    data: trendData,
                    borderColor: colors[index],
                    backgroundColor: colors[index].replace('rgb', 'rgba').replace(')', ', 0.1)'),
                    tension: 0.4,
                    fill: false
                };
            });

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: days,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Recovery Rate (%)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Time Period'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw.toFixed(1) + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Initialize Filters
        function initializeFilters() {
            const regionFilter = document.getElementById('regionFilter');
            const sortBy = document.getElementById('sortBy');
            const minCases = document.getElementById('minCases');
            const resetBtn = document.getElementById('resetFilters');

            regionFilter.addEventListener('change', applyFilters);
            sortBy.addEventListener('change', applyFilters);
            minCases.addEventListener('input', applyFilters);
            resetBtn.addEventListener('click', resetFilters);
        }

        function applyFilters() {
            const regionFilter = document.getElementById('regionFilter').value;
            const sortBy = document.getElementById('sortBy').value;
            const minCases = parseInt(document.getElementById('minCases').value) || 0;

            // Filter by region
            filteredData = [...covidData];
            if (regionFilter !== 'all') {
                filteredData = filteredData.filter(country => country.region === regionFilter);
            }

            // Filter by minimum cases
            if (minCases > 0) {
                filteredData = filteredData.filter(country => country.confirmed >= minCases);
            }

            // Sort data
            filteredData.sort((a, b) => {
                switch(sortBy) {
                    case 'deaths': return b.deaths - a.deaths;
                    case 'recovered': return b.recovered - a.recovered;
                    case 'active': return b.active - a.active;
                    case 'death-rate': return (b.deaths/b.confirmed) - (a.deaths/a.confirmed);
                    case 'recovery-rate': return (b.recovered/b.confirmed) - (a.recovered/a.confirmed);
                    default: return b.confirmed - a.confirmed;
                }
            });

            // Update table with animation
            document.getElementById('tableBody').classList.add('updating');
            setTimeout(() => {
                populateCountryTable();
                document.getElementById('tableBody').classList.remove('updating');
            }, 300);
        }

        function resetFilters() {
            document.getElementById('regionFilter').value = 'all';
            document.getElementById('sortBy').value = 'confirmed';
            document.getElementById('minCases').value = '';
            filteredData = [...covidData];
            populateCountryTable();
        }

        // Theme Toggle
        function initializeTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const savedTheme = localStorage.getItem('covid-dashboard-theme') || 'light';
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
                themeToggle.textContent = 'â˜€ï¸';
            }

            themeToggle.addEventListener('click', toggleTheme);
        }

        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.getElementById('themeToggle');
            
            body.classList.toggle('dark-theme');
            const isDark = body.classList.contains('dark-theme');
            
            themeToggle.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
            localStorage.setItem('covid-dashboard-theme', isDark ? 'dark' : 'light');
        }

        // Live Clock
        function startLiveClock() {
            updateTimestamps();
            setInterval(updateTimestamps, 1000);
            
            // Simulate data updates every 30 seconds
            setInterval(() => {
                const cards = document.querySelectorAll('.dashboard-card');
                cards.forEach(card => {
                    card.classList.add('updating');
                    setTimeout(() => card.classList.remove('updating'), 600);
                });
            }, 30000);
        }

        // Country Details Modal
        function showCountryDetails(countryName) {
            const country = covidData.find(c => c.country === countryName);
            if (!country) return;

            const deathRate = ((country.deaths / country.confirmed) * 100).toFixed(2);
            const recoveryRate = ((country.recovered / country.confirmed) * 100).toFixed(2);
            const activeRate = ((country.active / country.confirmed) * 100).toFixed(2);

            // Check if dark theme is active
            const isDarkTheme = document.body.classList.contains('dark-theme');
            const modalBg = isDarkTheme ? 'rgba(45, 55, 72, 0.95)' : 'white';
            const textColor = isDarkTheme ? '#e2e8f0' : '#4a5568';
            const headerColor = isDarkTheme ? '#f7fafc' : '#667eea';

            const modalHTML = `
                <div id="countryModal" style="
                    position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                    background: rgba(0,0,0,0.8); z-index: 10000; 
                    display: flex; align-items: center; justify-content: center;
                    animation: fadeIn 0.3s ease;
                ">
                    <div style="
                        background: ${modalBg}; padding: 30px; border-radius: 15px; 
                        max-width: 500px; width: 90%; text-align: center;
                        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                        animation: slideInUp 0.3s ease; color: ${textColor};
                        border: ${isDarkTheme ? '2px solid #4a5568' : 'none'};
                    ">
                        <h2 style="color: ${headerColor}; margin-bottom: 20px;">ğŸ“Š ${country.country} Details</h2>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <div style="background: ${isDarkTheme ? '#2d3748' : '#f8fafc'}; padding: 15px; border-radius: 10px; color: ${textColor};">
                                <strong>Confirmed:</strong><br>${new Intl.NumberFormat().format(country.confirmed)}
                            </div>
                            <div style="background: ${isDarkTheme ? '#3d2a2a' : '#fef2f2'}; padding: 15px; border-radius: 10px; color: ${textColor};">
                                <strong>Deaths:</strong><br>${new Intl.NumberFormat().format(country.deaths)}
                            </div>
                            <div style="background: ${isDarkTheme ? '#2a3d2a' : '#f0fdf4'}; padding: 15px; border-radius: 10px; color: ${textColor};">
                                <strong>Recovered:</strong><br>${new Intl.NumberFormat().format(country.recovered)}
                            </div>
                            <div style="background: ${isDarkTheme ? '#3d3a2a' : '#fffbeb'}; padding: 15px; border-radius: 10px; color: ${textColor};">
                                <strong>Active:</strong><br>${new Intl.NumberFormat().format(country.active)}
                            </div>
                        </div>
                        <div style="margin-bottom: 20px; color: ${textColor};">
                            <p style="color: ${textColor};"><strong>Death Rate:</strong> ${deathRate}%</p>
                            <p style="color: ${textColor};"><strong>Recovery Rate:</strong> ${recoveryRate}%</p>
                            <p style="color: ${textColor};"><strong>Active Rate:</strong> ${activeRate}%</p>
                            <p style="color: ${textColor};"><strong>Region:</strong> ${country.region.toUpperCase()}</p>
                        </div>
                        <button onclick="closeCountryModal()" style="
                            background: #667eea; color: white; border: none; 
                            padding: 12px 24px; border-radius: 8px; cursor: pointer;
                            font-weight: 600;
                        ">Close</button>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        function closeCountryModal() {
            const modal = document.getElementById('countryModal');
            if (modal) modal.remove();
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes slideInUp {
                from { transform: translateY(30px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
            @keyframes fadeInUp {
                from { transform: translateY(20px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        // Add interactivity to cards
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('card')) {
                e.target.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    e.target.style.transform = 'translateY(-5px)';
                }, 200);
            }
        });

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.id === 'countryModal') {
                closeCountryModal();
            }
        });
    </script>
</body>
</html>